<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>SpiffCalendar Demo</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="lib/jquery-ui.min.css"/>
  <link rel="stylesheet" type="text/css" href="lib/jquery.qtip.min.css"/>
  <link rel="stylesheet" type="text/css" href="../css/SpiffCalendar.css" />
  <link rel="stylesheet" type="text/css" href="demo.css" />
</head>

<script src="lib/jquery-3.0.0.min.js" type="text/javascript"></script>
<script src="lib/jquery-ui.min.js" type="text/javascript"></script>
<script src="lib/jquery.i18n.min.js" type="text/javascript"></script>
<script src="lib/jquery.qtip.min.js" type="text/javascript"></script>
<script src="../src/SpiffCalendar.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {

    var calendar = new SpiffCalendar($('#calendar'), {
        event_api: function(start_date, end_date, success_cb) {
            success_cb({
                '2016-07-09': {
                    events: [
                        {name: 'Test1'},
                        {time: '10:00', name: 'Test2'}
                    ],
                    footnote: {
                        text: 'day before tomorrow'
                    }
                },
                '2016-07-19': {
                    events: [
                        {name: 'Foo'},
                        {name: 'Bar'}
                    ]
                }
            });
        },
        event_renderer: function(container, event_data) {
            if (event_data.time)
                return event_data.time + ' ' + event_data.name;
            return $(`<span class="fancy"></span>`).text(event_data.name);
        },
        footnote_renderer: function(footnote_data) {
            if (!footnote_data)
                return '';
            return footnote_data.text;
        },
        /*
        event_detail_renderer: function(event_data) {
            var popup = $('#popup-detail');
            var time = event_data.time ? event_data.time : 'all day';
            popup.find('#popup-detail-name').text(event_data.name);
            popup.find('#popup-detail-time').text(time);
            return popup.clone(true); // MUST return a new clone, the calendar will change it
        },
        event_add_renderer: function() {
            var popup = $('#popup-add');
            var button = $('#popup-add button');
            button.click(function() {
                $('.SpiffCalendarPopup').hide();
            });
            return popup.clone(true); // MUST return a new clone, the calendar will change it
        },
        */
        on_add_event: function(thedate, container, on_success) {
            var name = container.find('#popup-add-name').val();
            console.log('Add:', thedate, name);
			on_success({name: name, time: undefined});
        },
        on_move_event: function(event_data, target_date) {
            console.log('Moved:', event_data, target_date);
        }
    });
});
</script>

<body>

<div id="header"><h1>SpiffCalendar Demo</h1></div>
<div id="wrap">
  <div id="calendar">
  </div>
</div>

<div id="popup-detail" class="popup" style="display: none">
    <label for="popup-detail-name">Event: </label>
    <span id="popup-detail-name"></span>
    <label for="popup-detail-name">When: </label>
    <span id="popup-detail-time"></span>
</div>

<div id="popup-add" class="popup" style="display: none">
    <input type="text" placeholder="Title"/>
    <div id="popup-buttons">
        <button>Close</button>
    </div>
</div>

</body>
</html>
